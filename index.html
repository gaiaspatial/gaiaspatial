<!DOCTYPE html>
<html>
    <head>
        <title>GaIa Spatial</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    


    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
    <script src="booklet/jquery.easing.1.3.js" type="text/javascript"></script>
    <script src="booklet/jquery.booklet.1.1.0.min.js" type="text/javascript"></script>

    <link href="booklet/jquery.booklet.1.1.0.css" type="text/css" rel="stylesheet" media="screen" />
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>



    <style type="text/css">
      h1{
        font-size:50px;
        margin:50px;
        color:#333;
      }
      span.reference{
        font-family:Arial;
        position:fixed;
        right:10px;
        top:10px;
        font-size:15px;
      }
      span.reference a{
        color:#fff;
        text-transform:uppercase;
        text-decoration:none;
      }
    </style>

    </head>


    <body>
    

      <div id="pp_gallery" class="pp_gallery">

        <div id="pp_loading" class="pp_loading"></div>
        <div id="pp_next" class="pp_next"></div>
        <div id="pp_prev" class="pp_prev"></div>
        <div id="pp_thumbContainer">

          <div class="album">
            <div class="content">
              <img src="img/album1/thumbs/1.jpg" alt="img/album1/1.jpg" />
              <span>Image Title or Description</span>
            </div>
            <div class="content">
              <img src="img/album1/thumbs/2.jpg" alt="img/album1/2.jpg" />
              <span>Image Title or Description</span>
            </div>
            <div class="content">
              <img src="img/album1/thumbs/3.jpg" alt="img/album1/3.jpg" />
              <span>Image Title or Description</span>
            </div>
            <div class="content">
              <img src="img/album1/thumbs/4.jpg" alt="img/album1/4.jpg" />
              <span>Image Title or Description</span>
            </div>
            <div class="content">
              <img src="img/album1/thumbs/5.jpg" alt="img/album1/5.jpg" />
              <span>Image Title or Description</span>
            </div>
            <div class="content">
              <img src="img/album1/thumbs/6.jpg" alt="img/album1/6.jpg" />
              <span>Image Title or Description</span>
            </div>
            <div class="descr">
              Projects
            </div>
          </div>

          <div class="album">
            <div class="content">
              <img src="http://placehold.it/140x93" alt="http://placehold.it/640x426" />
              <span>Image Title or Description</span>
            </div>
            <div class="content">
              <img src="http://placehold.it/140x93" alt="http://placehold.it/640x426" />
              <span>Image Title or Description</span>
            </div>
            <div class="content">
              <img src="http://placehold.it/93x140" alt="http://placehold.it/426x640" />
              <span>Image Title or Description</span>
            </div>
            <div class="content">
              <img src="http://placehold.it/93x140" alt="http://placehold.it/426x640" />
              <span>Image Title or Description</span>
            </div>
            <div class="content">
              <img src="http://placehold.it/140x137" alt="http://placehold.it/640x626" />
              <span>Image Title or Description</span>
            </div>
            <div class="content">
              <img src="http://placehold.it/140x93" alt="http://placehold.it/640x426" />
              <span>Image Title or Description</span>
            </div>
            <div class="descr">
              Picture Set
            </div>
          </div>

          <div id="pp_back" class="pp_back">Albums</div>
        </div>
      </div>



    <div class="book_wrapper">
      <a id="next_page_button"></a>
      <a id="prev_page_button"></a>
      <div id="loading" class="loading">Loading pages...</div>
      <div id="mybook" style="display:none;">
        <div class="b-load">
          <div>
            <h1><img src="img/logo1.png" width="360px" style="border:none; background-color:rgba(78,78,78,0.2);" alt=""></h1>            
            <p style="text-indent:25px;"><b>Gaia Spatial, LLC</b> is an interdisciplinary geospatial consultancy, offering services in environmental research, ecological and cultural conservation, natural resource management, sustainable development and capacity building. 
            <p style="text-indent:25px;">Read on to learn more about our perspectives, approach and expertise. </p>
            <p style="text-indent:25px;">Explore our past projects in the gallery at the bottom of the page.</p>
            <p style="text-indent:25px;">Or contact us to discuss your geospatial needs.</p>            
          </div>
          <div>         
            <h1>Maecenas nec odio et ante tincidunt tempus.</h1>
            <p>Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui.</p>    
            <img src="http://placehold.it/350x163" alt="" />        
          </div>
          <div>
            <img src="http://placehold.it/350x163" alt="" />
            <h1>Lorem ipsum dolor</h1>
            <p>Sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo.</p>  
          </div>
          <div>
            <img src="http://placehold.it/350x163" alt="" />
            <h1>Nam libero tempore</h1>
            <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. </p>  
          </div>
          <div>
            <img src="http://placehold.it/350x425" alt="" />            
          </div>
          <div>
            <h1>Etiam ultricies nisi vel augue</h1>
            <p>Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc, quis gravida magna mi a libero. Fusce vulputate eleifend sapien. Vestibulum purus quam, scelerisque ut, mollis sed, nonummy id, metus. Nullam accumsan lorem in dui. Cras ultricies mi eu turpis hendrerit fringilla. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In ac dui quis mi consectetuer lacinia. Nam pretium turpis et arcu. Duis arcu tortor, suscipit eget, imperdiet nec, imperdiet iaculis, ipsum. Sed aliquam ultrices mauris. Integer ante arcu, accumsan a, consectetuer eget, posuere ut, mauris. Praesent adipiscing. Phasellus ullamcorper ipsum rutrum nunc.</p>  
          </div>
          
          </div>
        </div>
      </div>



    
        <!-- The JavaScript -->

        <script type="text/javascript">
      $(function() {
        var $mybook     = $('#mybook');
        var $bttn_next    = $('#next_page_button');
        var $bttn_prev    = $('#prev_page_button');
        var $loading    = $('#loading');
        var $mybook_images  = $mybook.find('img');
        var cnt_images    = $mybook_images.length;
        var loaded      = 0;
        //preload all the images in the book,
        //and then call the booklet plugin

        $mybook_images.each(function(){
          var $img  = $(this);
          var source  = $img.attr('src');
          $('<img/>').load(function(){
            ++loaded;
            if(loaded == cnt_images){
              $loading.hide();
              $bttn_next.show();
              $bttn_prev.show();
              $mybook.show().booklet({
                name:               null,                            // name of the booklet to display in the document title bar
                width:              800,                             // container width
                height:             500,                             // container height
                speed:              600,                             // speed of the transition between pages
                direction:          'LTR',                           // direction of the overall content organization, default LTR, left to right, can be RTL for languages which read right to left
                startingPage:       0,                               // index of the first page to be displayed
                easing:             'easeInOutQuad',                 // easing method for complete transition
                easeIn:             'easeInQuad',                    // easing method for first half of transition
                easeOut:            'easeOutQuad',                   // easing method for second half of transition

                closed:             false,                           // start with the book "closed", will add empty pages to beginning and end of book
                closedFrontTitle:   null,                            // used with "closed", "menu" and "pageSelector", determines title of blank starting page
                closedFrontChapter: null,                            // used with "closed", "menu" and "chapterSelector", determines chapter name of blank starting page
                closedBackTitle:    null,                            // used with "closed", "menu" and "pageSelector", determines chapter name of blank ending page
                closedBackChapter:  null,                            // used with "closed", "menu" and "chapterSelector", determines chapter name of blank ending page
                covers:             false,                           // used with  "closed", makes first and last pages into covers, without page numbers (if enabled)

                pagePadding:        10,                              // padding for each page wrapper
                pageNumbers:        true,                            // display page numbers on each page

                hovers:             false,                            // enables preview pageturn hover animation, shows a small preview of previous or next page on hover
                overlays:           false,                            // enables navigation using a page sized overlay, when enabled links inside the content will not be clickable
                tabs:               false,                           // adds tabs along the top of the pages
                tabWidth:           60,                              // set the width of the tabs
                tabHeight:          20,                              // set the height of the tabs
                arrows:             false,                           // adds arrows overlayed over the book edges
                cursor:             'pointer',                       // cursor css setting for side bar areas

                hash:               false,                           // enables navigation using a hash string, ex: #/page/1 for page 1, will affect all booklets with 'hash' enabled
                keyboard:           true,                            // enables navigation with arrow keys (left: previous, right: next)
                next:               $bttn_next,               // selector for element to use as click trigger for next page
                prev:               $bttn_prev,               // selector for element to use as click trigger for previous page

                menu:               null,                            // selector for element to use as the menu area, required for 'pageSelector'
                pageSelector:       false,                           // enables navigation with a dropdown menu of pages, requires 'menu'
                chapterSelector:    false,                           // enables navigation with a dropdown menu of chapters, determined by the "rel" attribute, requires 'menu'

                shadows:            true,                            // display shadows on page animations
                shadowTopFwdWidth:  166,                             // shadow width for top forward anim
                shadowTopBackWidth: 166,                             // shadow width for top back anim
                shadowBtmWidth:     50,                              // shadow width for bottom shadow

                before:             function(){},                    // callback invoked before each page turn animation
                after:              function(){}                     // callback invoked after each page turn animation
              });
              
            }
          }).attr('src',source);
        });
        
      });
        </script>

         <!-- The JavaScript for photo gallery -->
    <script src="js/jquery.transform-0.8.0.min.js"></script>
        <script type="text/javascript">
            $(function() {
        var ie      = false;
        if ($.browser.msie) {
          ie = true;
        }
        //current album/image displayed 
        var enableshow  = true;
        var current   = -1;
        var album   = -1;
        //windows width
        var w_width   = $(window).width();
        //caching
        var $albums   = $('#pp_thumbContainer div.album');
        var $loader   = $('#pp_loading');
        var $next   = $('#pp_next');
        var $prev   = $('#pp_prev');
        var $images   = $('#pp_thumbContainer div.content img');
        var $back   = $('#pp_back');
        
        //we wnat to spread the albums through the page equally
        //number of spaces to divide with:number of albums plus 1
        var nmb_albums  = $albums.length;
        var spaces    = w_width/(nmb_albums+1);
        var cnt     = 0;
        //preload all the images (thumbs)
        var nmb_images  = $images.length;
        var loaded    = 0;
        $images.each(function(i){
          var $image = $(this);
          $('<img />').load(function(){
            ++loaded;
            if(loaded == nmb_images){
              //let's spread the albums equally on the bottom of the page
              $albums.each(function(){
                var $this   = $(this);
                ++cnt;
                var left  = spaces*cnt - $this.width()/2;
                $this.css('left',left+'px');
                $this.stop().animate({'bottom':'0px'},500);
              }).unbind('click').bind('click',spreadPictures);
              //also rotate each picture of an album with a random number of degrees
              $images.each(function(){
                var $this   = $(this);
                var r     = Math.floor(Math.random()*41)-20;
                $this.transform({'rotate' : r + 'deg'});
              });
            }
          }).attr('src', $image.attr('src'));
        });
        
        function spreadPictures(){
          var $album  = $(this);
          //track which album is opened
          album   = $album.index();
          //hide all the other albums
          $albums.not($album).stop().animate({'bottom':'-90px'},300);
          $album.unbind('click');
          //now move the current album to the left 
          //and at the same time spread its images through 
          //the window, rotating them randomly. Also hide the description of the album
          
          //store the current left for the reverse operation
          $album.data('left',$album.css('left'))
              .stop()
              .animate({'left':'0px'},500).find('.descr').stop().animate({'bottom':'-30px'},200);
          var total_pic   = $album.find('.content').length;
          var cnt     = 0;
          //each picture
          $album.find('.content')
              .each(function(){
            var $content = $(this);
            ++cnt;
            //window width
            var w_width   = $(window).width();
            var spaces    = w_width/(total_pic+1);
            var left    = (spaces*cnt) - (140/2);
            var r       = Math.floor(Math.random()*41)-20;
            //var r = Math.floor(Math.random()*81)-40;
            $content.stop().animate({'left':left+'px'},500,function(){
              $(this).unbind('click')
                   .bind('click',showImage)
                   .unbind('mouseenter')
                   .bind('mouseenter',upImage)
                   .unbind('mouseleave')
                   .bind('mouseleave',downImage);
            }).find('img')
              .stop()
              .animate({'rotate': r+'deg'},300);
            $back.stop().animate({'left':'0px'},300);
          });
        }
        
        //back to albums
        //the current album gets its innitial left position
        //all the other albums slide up
        //the current image slides out
        $back.bind('click',function(){
          $back.stop().animate({'left':'-100px'},300);
          hideNavigation();
          //there's a picture being displayed
          //lets slide the current one up
          if(current != -1){
            hideCurrentPicture();
          }
          
          var $current_album = $('#pp_thumbContainer div.album:nth-child('+parseInt(album+1)+')');
          $current_album.stop()
                  .animate({'left':$current_album.data('left')},500)
                  .find('.descr')
                  .stop()
                  .animate({'bottom':'0px'},500);
          
          $current_album.unbind('click')
                  .bind('click',spreadPictures);
          
          $current_album.find('.content')
                .each(function(){
                var $content = $(this);
                $content.unbind('mouseenter mouseleave click');
                $content.stop().animate({'left':'0px'},500);
                });
                
          $albums.not($current_album).stop().animate({'bottom':'0px'},500);
        });
        
        //displays an image (clicked thumb) in the center of the page
        //if nav is passed, then displays the next / previous one of the 
        //current album
        function showImage(nav){
          if(!enableshow) return;
          enableshow = false;
          if(nav == 1){
            //reached the first one
            if(current==0){
              enableshow = true;
              return;
            }
            var $content      = $('#pp_thumbContainer div.album:nth-child('+parseInt(album+1)+')')
                          .find('.content:nth-child('+parseInt(current)+')');
            //reached the last one
            if($content.length==0){
              enableshow = true;
              current-=2;
              return;
            } 
          }
          else
            var $content      = $(this);
          
          //show ajax loading image
          $loader.show();
          
          //there's a picture being displayed
          //lets slide the current one up
          if(current != -1){
            hideCurrentPicture();
          }
          
          current         = $content.index();
          var $thumb        = $content.find('img');
          var imgL_source     = $thumb.attr('alt');
          var imgL_description  = $thumb.next().html();
          //preload the large image to show
          $('<img style=""/>').load(function(){
            var $imgL   = $(this);
            //resize the image based on the windows size
            resize($imgL);
            //create an element to include the large image
            //and its description
            var $preview = $('<div />',{
              'id'    : 'pp_preview',
              'className' : 'pp_preview',
              'html'      : '<div class="pp_descr"><span>'+imgL_description+'</span></div>',
              'style'   : 'visibility:hidden;'
            });
            $preview.prepend($imgL);
            $('#pp_gallery').prepend($preview);
            
            var largeW        = $imgL.width()+20;
            var largeH        = $imgL.height()+10+45;
            //change the properties of the wrapping div 
            //to fit the large image sizes
            $preview.css({
              'width'     :largeW+'px',
              'height'    :largeH+'px',
              'marginTop'   :-largeH/2-20+'px',
              'marginLeft'  :-largeW/2+'px',
              'visibility'  :'visible'
            });
            
            //show navigation
            showNavigation();
            
            //hide the ajax image loading
            $loader.hide();
            
            //slide up (also rotating) the large image
            var r       = Math.floor(Math.random()*41)-20;
            if(ie)
              var param = {
                'top':'50%'
              };
            else
              var param = {
                'top':'50%',
                'rotate': r+'deg'
              };
            $preview.stop().animate(param,500,function(){
              enableshow = true;
            });
          }).error(function(){
            //error loading image. Maybe show a message : 'no preview available'?
          }).attr('src',imgL_source); 
        }
        
        //click next image
        $next.bind('click',function(){
          current+=2;
          showImage(1);
        });
        
        //click previous image
        $prev.bind('click',function(){
          showImage(1);
        });
        
        //slides up the current picture
        function hideCurrentPicture(){
          current = -1;
          var r   = Math.floor(Math.random()*41)-20;
          if(ie)
            var param = {
              'top':'-150%'
            };
          else
            var param = {
              'top':'-150%',
              'rotate': r+'deg'
            };
          $('#pp_preview').stop()
                  .animate(param,500,function(){
                    $(this).remove();
                  });
        }
        
        //shows the navigation buttons
        function showNavigation(){
          $next.stop().animate({'right':'0px'},100);
          $prev.stop().animate({'left':'0px'},100);
        }
        
        //hides the navigation buttons
        function hideNavigation(){
          $next.stop().animate({'right':'-40px'},300);
          $prev.stop().animate({'left':'-40px'},300);
        }
        
        //mouseenter event on each thumb
        function upImage(){
          var $content  = $(this);
          $content.stop().animate({
            'marginTop'   : '-70px'
          },400).find('img')
              .stop()
              .animate({'rotate': '0deg'},400);
        }
        
        //mouseleave event on each thumb
        function downImage(){
          var $content  = $(this);
          var r       = Math.floor(Math.random()*41)-20;
          $content.stop().animate({
            'marginTop'   : '0px'
          },400).find('img').stop().animate({'rotate': r + 'deg'},400);
        }
        
        //resize function based on windows size
        function resize($image){
          var widthMargin   = 50
          var heightMargin  = 200;
          
          var windowH      = $(window).height()-heightMargin;
          var windowW      = $(window).width()-widthMargin;
          var theImage     = new Image();
          theImage.src     = $image.attr("src");
          var imgwidth     = theImage.width;
          var imgheight    = theImage.height;

          if((imgwidth > windowW)||(imgheight > windowH)){
            if(imgwidth > imgheight){
              var newwidth = windowW;
              var ratio = imgwidth / windowW;
              var newheight = imgheight / ratio;
              theImage.height = newheight;
              theImage.width= newwidth;
              if(newheight>windowH){
                var newnewheight = windowH;
                var newratio = newheight/windowH;
                var newnewwidth =newwidth/newratio;
                theImage.width = newnewwidth;
                theImage.height= newnewheight;
              }
            }
            else{
              var newheight = windowH;
              var ratio = imgheight / windowH;
              var newwidth = imgwidth / ratio;
              theImage.height = newheight;
              theImage.width= newwidth;
              if(newwidth>windowW){
                var newnewwidth = windowW;
                var newratio = newwidth/windowW;
                var newnewheight =newheight/newratio;
                theImage.height = newnewheight;
                theImage.width= newnewwidth;
              }
            }
          }
          $image.css({'width':theImage.width+'px','height':theImage.height+'px'});
        }
            });
        </script>
  
    </body>
</html>